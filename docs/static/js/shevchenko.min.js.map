{"version":3,"file":"shevchenko.min.js","sources":["../../../src/Core/GrammaticalCase.ts","../../../src/Core/Gender.ts","../../../src/Core/Validator.ts","../../../node_modules/tslib/tslib.es6.js","../../../src/AnthroponymInflector/InflectorCommandType.ts","../../../src/Utils/RegExpUtils.ts","../../../src/Utils/StringUtils.ts","../../../src/AnthroponymInflector/AppendCommandRunner.ts","../../../src/AnthroponymInflector/ReplaceCommandRunner.ts","../../../src/AnthroponymInflector/CommandRunnerFactory.ts","../../../src/AnthroponymInflector/RuleInflector.ts","../../../src/AnthroponymInflector/NameInflector.ts","../../../src/AnthroponymInflector/FirstNameInflector.ts","../../../src/AnthroponymInflector/MiddleNameInflector.ts","../../../src/Utils/LangUtils.ts","../../../src/AnthroponymInflector/LastNameInflector.ts","../../../src/AnthroponymInflector/AnthroponymInflector.ts","../../../src/PartOfSpeechRecognizer/WordTransformer.ts","../../../src/PartOfSpeechRecognizer/PartOfSpeechRecognizer.ts","../../../src/PartOfSpeechRecognizer/PartOfSpeech.ts","../../../node_modules/synaptic/dist/synaptic.js","../../../src/PartOfSpeechRecognizer/NeuralNetworkParameters.ts","../../../src/PartOfSpeechRecognizer/WordEncoder.ts","../../../src/PartOfSpeechRecognizer/PartOfSpeechEncoder.ts","../../../src/PartOfSpeechRecognizer/PartOfSpeechDecoder.ts","../../../src/PartOfSpeechRecognizer/NeuralNetwork.ts","../../../src/PartOfSpeechRecognizer/RecognizerRule.ts","../../../src/bootstrap.ts","../../../src/shevchenko.ts"],"sourcesContent":[null,null,null,"/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/*!\n * The MIT License (MIT)\n * \n * Copyright (c) 2017 Juan Cazala - https://caza.la\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE\n * \n * \n * \n * ********************************************************************************************\n *                                   SYNAPTIC (v1.1.4)\n * ********************************************************************************************\n * \n * Synaptic is a javascript neural network library for node.js and the browser, its generalized\n * algorithm is architecture-free, so you can build and train basically any type of first order\n * or even second order neural network architectures.\n * \n * http://en.wikipedia.org/wiki/Recurrent_neural_network#Second_Order_Recurrent_Neural_Network\n * \n * The library includes a few built-in architectures like multilayer perceptrons, multilayer\n * long-short term memory networks (LSTM) or liquid state machines, and a trainer capable of\n * training any given network, and includes built-in training tasks/tests like solving an XOR,\n * passing a Distracted Sequence Recall test or an Embeded Reber Grammar test.\n * \n * The algorithm implemented by this library has been taken from Derek D. Monner's paper:\n * \n * \n * A generalized LSTM-like training algorithm for second-order recurrent neural networks\n * http://www.overcomplete.net/papers/nn2012.pdf\n * \n * There are references to the equations in that paper commented through the source code.\n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"synaptic\"] = factory();\n\telse\n\t\troot[\"synaptic\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _LayerConnection = __webpack_require__(6);\n\nvar _LayerConnection2 = _interopRequireDefault(_LayerConnection);\n\nvar _Neuron = __webpack_require__(2);\n\nvar _Neuron2 = _interopRequireDefault(_Neuron);\n\nvar _Network = __webpack_require__(1);\n\nvar _Network2 = _interopRequireDefault(_Network);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// types of connections\nvar connectionType = {\n  ALL_TO_ALL: \"ALL TO ALL\",\n  ONE_TO_ONE: \"ONE TO ONE\",\n  ALL_TO_ELSE: \"ALL TO ELSE\"\n};\n\n// types of gates\nvar gateType = {\n  INPUT: \"INPUT\",\n  OUTPUT: \"OUTPUT\",\n  ONE_TO_ONE: \"ONE TO ONE\"\n};\n\nvar Layer = function () {\n  function Layer(size) {\n    _classCallCheck(this, Layer);\n\n    this.size = size | 0;\n    this.list = [];\n\n    this.connectedTo = [];\n\n    while (size--) {\n      var neuron = new _Neuron2.default();\n      this.list.push(neuron);\n    }\n  }\n\n  // activates all the neurons in the layer\n\n\n  _createClass(Layer, [{\n    key: 'activate',\n    value: function activate(input) {\n\n      var activations = [];\n\n      if (typeof input != 'undefined') {\n        if (input.length != this.size) throw new Error('INPUT size and LAYER size must be the same to activate!');\n\n        for (var id in this.list) {\n          var neuron = this.list[id];\n          var activation = neuron.activate(input[id]);\n          activations.push(activation);\n        }\n      } else {\n        for (var id in this.list) {\n          var neuron = this.list[id];\n          var activation = neuron.activate();\n          activations.push(activation);\n        }\n      }\n      return activations;\n    }\n\n    // propagates the error on all the neurons of the layer\n\n  }, {\n    key: 'propagate',\n    value: function propagate(rate, target) {\n\n      if (typeof target != 'undefined') {\n        if (target.length != this.size) throw new Error('TARGET size and LAYER size must be the same to propagate!');\n\n        for (var id = this.list.length - 1; id >= 0; id--) {\n          var neuron = this.list[id];\n          neuron.propagate(rate, target[id]);\n        }\n      } else {\n        for (var id = this.list.length - 1; id >= 0; id--) {\n          var neuron = this.list[id];\n          neuron.propagate(rate);\n        }\n      }\n    }\n\n    // projects a connection from this layer to another one\n\n  }, {\n    key: 'project',\n    value: function project(layer, type, weights) {\n\n      if (layer instanceof _Network2.default) layer = layer.layers.input;\n\n      if (layer instanceof Layer) {\n        if (!this.connected(layer)) return new _LayerConnection2.default(this, layer, type, weights);\n      } else throw new Error('Invalid argument, you can only project connections to LAYERS and NETWORKS!');\n    }\n\n    // gates a connection betwenn two layers\n\n  }, {\n    key: 'gate',\n    value: function gate(connection, type) {\n\n      if (type == Layer.gateType.INPUT) {\n        if (connection.to.size != this.size) throw new Error('GATER layer and CONNECTION.TO layer must be the same size in order to gate!');\n\n        for (var id in connection.to.list) {\n          var neuron = connection.to.list[id];\n          var gater = this.list[id];\n          for (var input in neuron.connections.inputs) {\n            var gated = neuron.connections.inputs[input];\n            if (gated.ID in connection.connections) gater.gate(gated);\n          }\n        }\n      } else if (type == Layer.gateType.OUTPUT) {\n        if (connection.from.size != this.size) throw new Error('GATER layer and CONNECTION.FROM layer must be the same size in order to gate!');\n\n        for (var id in connection.from.list) {\n          var neuron = connection.from.list[id];\n          var gater = this.list[id];\n          for (var projected in neuron.connections.projected) {\n            var gated = neuron.connections.projected[projected];\n            if (gated.ID in connection.connections) gater.gate(gated);\n          }\n        }\n      } else if (type == Layer.gateType.ONE_TO_ONE) {\n        if (connection.size != this.size) throw new Error('The number of GATER UNITS must be the same as the number of CONNECTIONS to gate!');\n\n        for (var id in connection.list) {\n          var gater = this.list[id];\n          var gated = connection.list[id];\n          gater.gate(gated);\n        }\n      }\n      connection.gatedfrom.push({ layer: this, type: type });\n    }\n\n    // true or false whether the whole layer is self-connected or not\n\n  }, {\n    key: 'selfconnected',\n    value: function selfconnected() {\n\n      for (var id in this.list) {\n        var neuron = this.list[id];\n        if (!neuron.selfconnected()) return false;\n      }\n      return true;\n    }\n\n    // true of false whether the layer is connected to another layer (parameter) or not\n\n  }, {\n    key: 'connected',\n    value: function connected(layer) {\n      // Check if ALL to ALL connection\n      var connections = 0;\n      for (var here in this.list) {\n        for (var there in layer.list) {\n          var from = this.list[here];\n          var to = layer.list[there];\n          var connected = from.connected(to);\n          if (connected.type == 'projected') connections++;\n        }\n      }\n      if (connections == this.size * layer.size) return Layer.connectionType.ALL_TO_ALL;\n\n      // Check if ONE to ONE connection\n      connections = 0;\n      for (var neuron in this.list) {\n        var from = this.list[neuron];\n        var to = layer.list[neuron];\n        var connected = from.connected(to);\n        if (connected.type == 'projected') connections++;\n      }\n      if (connections == this.size) return Layer.connectionType.ONE_TO_ONE;\n    }\n\n    // clears all the neuorns in the layer\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      for (var id in this.list) {\n        var neuron = this.list[id];\n        neuron.clear();\n      }\n    }\n\n    // resets all the neurons in the layer\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      for (var id in this.list) {\n        var neuron = this.list[id];\n        neuron.reset();\n      }\n    }\n\n    // returns all the neurons in the layer (array)\n\n  }, {\n    key: 'neurons',\n    value: function neurons() {\n      return this.list;\n    }\n\n    // adds a neuron to the layer\n\n  }, {\n    key: 'add',\n    value: function add(neuron) {\n      neuron = neuron || new _Neuron2.default();\n      this.list.push(neuron);\n      this.size++;\n    }\n  }, {\n    key: 'set',\n    value: function set(options) {\n      options = options || {};\n\n      for (var i in this.list) {\n        var neuron = this.list[i];\n        if (options.label) neuron.label = options.label + '_' + neuron.ID;\n        if (options.squash) neuron.squash = options.squash;\n        if (options.bias) neuron.bias = options.bias;\n      }\n      return this;\n    }\n  }]);\n\n  return Layer;\n}();\n\nLayer.connectionType = connectionType;\nLayer.gateType = gateType;\nexports.default = Layer;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Neuron = __webpack_require__(2);\n\nvar _Neuron2 = _interopRequireDefault(_Neuron);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nvar _Trainer = __webpack_require__(3);\n\nvar _Trainer2 = _interopRequireDefault(_Trainer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Network = function () {\n  function Network(layers) {\n    _classCallCheck(this, Network);\n\n    if (typeof layers != 'undefined') {\n      this.layers = {\n        input: layers.input || null,\n        hidden: layers.hidden || [],\n        output: layers.output || null\n      };\n      this.optimized = null;\n    }\n  }\n\n  // feed-forward activation of all the layers to produce an ouput\n\n\n  _createClass(Network, [{\n    key: 'activate',\n    value: function activate(input) {\n      if (this.optimized === false) {\n        this.layers.input.activate(input);\n        for (var i = 0; i < this.layers.hidden.length; i++) {\n          this.layers.hidden[i].activate();\n        }return this.layers.output.activate();\n      } else {\n        if (this.optimized == null) this.optimize();\n        return this.optimized.activate(input);\n      }\n    }\n\n    // back-propagate the error thru the network\n\n  }, {\n    key: 'propagate',\n    value: function propagate(rate, target) {\n      if (this.optimized === false) {\n        this.layers.output.propagate(rate, target);\n        for (var i = this.layers.hidden.length - 1; i >= 0; i--) {\n          this.layers.hidden[i].propagate(rate);\n        }\n      } else {\n        if (this.optimized == null) this.optimize();\n        this.optimized.propagate(rate, target);\n      }\n    }\n\n    // project a connection to another unit (either a network or a layer)\n\n  }, {\n    key: 'project',\n    value: function project(unit, type, weights) {\n      if (this.optimized) this.optimized.reset();\n\n      if (unit instanceof Network) return this.layers.output.project(unit.layers.input, type, weights);\n\n      if (unit instanceof _Layer2.default) return this.layers.output.project(unit, type, weights);\n\n      throw new Error('Invalid argument, you can only project connections to LAYERS and NETWORKS!');\n    }\n\n    // let this network gate a connection\n\n  }, {\n    key: 'gate',\n    value: function gate(connection, type) {\n      if (this.optimized) this.optimized.reset();\n      this.layers.output.gate(connection, type);\n    }\n\n    // clear all elegibility traces and extended elegibility traces (the network forgets its context, but not what was trained)\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.restore();\n\n      var inputLayer = this.layers.input,\n          outputLayer = this.layers.output;\n\n      inputLayer.clear();\n      for (var i = 0; i < this.layers.hidden.length; i++) {\n        this.layers.hidden[i].clear();\n      }\n      outputLayer.clear();\n\n      if (this.optimized) this.optimized.reset();\n    }\n\n    // reset all weights and clear all traces (ends up like a new network)\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.restore();\n\n      var inputLayer = this.layers.input,\n          outputLayer = this.layers.output;\n\n      inputLayer.reset();\n      for (var i = 0; i < this.layers.hidden.length; i++) {\n        this.layers.hidden[i].reset();\n      }\n      outputLayer.reset();\n\n      if (this.optimized) this.optimized.reset();\n    }\n\n    // hardcodes the behaviour of the whole network into a single optimized function\n\n  }, {\n    key: 'optimize',\n    value: function optimize() {\n      var that = this;\n      var optimized = {};\n      var neurons = this.neurons();\n\n      for (var i = 0; i < neurons.length; i++) {\n        var neuron = neurons[i].neuron;\n        var layer = neurons[i].layer;\n        while (neuron.neuron) {\n          neuron = neuron.neuron;\n        }optimized = neuron.optimize(optimized, layer);\n      }\n\n      for (var i = 0; i < optimized.propagation_sentences.length; i++) {\n        optimized.propagation_sentences[i].reverse();\n      }optimized.propagation_sentences.reverse();\n\n      var hardcode = '';\n      hardcode += 'var F = Float64Array ? new Float64Array(' + optimized.memory + ') : []; ';\n      for (var i in optimized.variables) {\n        hardcode += 'F[' + optimized.variables[i].id + '] = ' + (optimized.variables[i].value || 0) + '; ';\n      }hardcode += 'var activate = function(input){\\n';\n      for (var i = 0; i < optimized.inputs.length; i++) {\n        hardcode += 'F[' + optimized.inputs[i] + '] = input[' + i + ']; ';\n      }for (var i = 0; i < optimized.activation_sentences.length; i++) {\n        if (optimized.activation_sentences[i].length > 0) {\n          for (var j = 0; j < optimized.activation_sentences[i].length; j++) {\n            hardcode += optimized.activation_sentences[i][j].join(' ');\n            hardcode += optimized.trace_sentences[i][j].join(' ');\n          }\n        }\n      }\n      hardcode += ' var output = []; ';\n      for (var i = 0; i < optimized.outputs.length; i++) {\n        hardcode += 'output[' + i + '] = F[' + optimized.outputs[i] + ']; ';\n      }hardcode += 'return output; }; ';\n      hardcode += 'var propagate = function(rate, target){\\n';\n      hardcode += 'F[' + optimized.variables.rate.id + '] = rate; ';\n      for (var i = 0; i < optimized.targets.length; i++) {\n        hardcode += 'F[' + optimized.targets[i] + '] = target[' + i + ']; ';\n      }for (var i = 0; i < optimized.propagation_sentences.length; i++) {\n        for (var j = 0; j < optimized.propagation_sentences[i].length; j++) {\n          hardcode += optimized.propagation_sentences[i][j].join(' ') + ' ';\n        }\n      }hardcode += ' };\\n';\n      hardcode += 'var ownership = function(memoryBuffer){\\nF = memoryBuffer;\\nthis.memory = F;\\n};\\n';\n      hardcode += 'return {\\nmemory: F,\\nactivate: activate,\\npropagate: propagate,\\nownership: ownership\\n};';\n      hardcode = hardcode.split(';').join(';\\n');\n\n      var constructor = new Function(hardcode);\n\n      var network = constructor();\n      network.data = {\n        variables: optimized.variables,\n        activate: optimized.activation_sentences,\n        propagate: optimized.propagation_sentences,\n        trace: optimized.trace_sentences,\n        inputs: optimized.inputs,\n        outputs: optimized.outputs,\n        check_activation: this.activate,\n        check_propagation: this.propagate\n      };\n\n      network.reset = function () {\n        if (that.optimized) {\n          that.optimized = null;\n          that.activate = network.data.check_activation;\n          that.propagate = network.data.check_propagation;\n        }\n      };\n\n      this.optimized = network;\n      this.activate = network.activate;\n      this.propagate = network.propagate;\n    }\n\n    // restores all the values from the optimized network the their respective objects in order to manipulate the network\n\n  }, {\n    key: 'restore',\n    value: function restore() {\n      if (!this.optimized) return;\n\n      var optimized = this.optimized;\n\n      var getValue = function getValue() {\n        var args = Array.prototype.slice.call(arguments);\n\n        var unit = args.shift();\n        var prop = args.pop();\n\n        var id = prop + '_';\n        for (var property in args) {\n          id += args[property] + '_';\n        }id += unit.ID;\n\n        var memory = optimized.memory;\n        var variables = optimized.data.variables;\n\n        if (id in variables) return memory[variables[id].id];\n        return 0;\n      };\n\n      var list = this.neurons();\n\n      // link id's to positions in the array\n      for (var i = 0; i < list.length; i++) {\n        var neuron = list[i].neuron;\n        while (neuron.neuron) {\n          neuron = neuron.neuron;\n        }neuron.state = getValue(neuron, 'state');\n        neuron.old = getValue(neuron, 'old');\n        neuron.activation = getValue(neuron, 'activation');\n        neuron.bias = getValue(neuron, 'bias');\n\n        for (var input in neuron.trace.elegibility) {\n          neuron.trace.elegibility[input] = getValue(neuron, 'trace', 'elegibility', input);\n        }for (var gated in neuron.trace.extended) {\n          for (var input in neuron.trace.extended[gated]) {\n            neuron.trace.extended[gated][input] = getValue(neuron, 'trace', 'extended', gated, input);\n          }\n        } // get connections\n        for (var j in neuron.connections.projected) {\n          var connection = neuron.connections.projected[j];\n          connection.weight = getValue(connection, 'weight');\n          connection.gain = getValue(connection, 'gain');\n        }\n      }\n    }\n\n    // returns all the neurons in the network\n\n  }, {\n    key: 'neurons',\n    value: function neurons() {\n      var neurons = [];\n\n      var inputLayer = this.layers.input.neurons(),\n          outputLayer = this.layers.output.neurons();\n\n      for (var i = 0; i < inputLayer.length; i++) {\n        neurons.push({\n          neuron: inputLayer[i],\n          layer: 'input'\n        });\n      }\n\n      for (var i = 0; i < this.layers.hidden.length; i++) {\n        var hiddenLayer = this.layers.hidden[i].neurons();\n        for (var j = 0; j < hiddenLayer.length; j++) {\n          neurons.push({\n            neuron: hiddenLayer[j],\n            layer: i\n          });\n        }\n      }\n\n      for (var i = 0; i < outputLayer.length; i++) {\n        neurons.push({\n          neuron: outputLayer[i],\n          layer: 'output'\n        });\n      }\n\n      return neurons;\n    }\n\n    // returns number of inputs of the network\n\n  }, {\n    key: 'inputs',\n    value: function inputs() {\n      return this.layers.input.size;\n    }\n\n    // returns number of outputs of hte network\n\n  }, {\n    key: 'outputs',\n    value: function outputs() {\n      return this.layers.output.size;\n    }\n\n    // sets the layers of the network\n\n  }, {\n    key: 'set',\n    value: function set(layers) {\n      this.layers = {\n        input: layers.input || null,\n        hidden: layers.hidden || [],\n        output: layers.output || null\n      };\n      if (this.optimized) this.optimized.reset();\n    }\n  }, {\n    key: 'setOptimize',\n    value: function setOptimize(bool) {\n      this.restore();\n      if (this.optimized) this.optimized.reset();\n      this.optimized = bool ? null : false;\n    }\n\n    // returns a json that represents all the neurons and connections of the network\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON(ignoreTraces) {\n      this.restore();\n\n      var list = this.neurons();\n      var neurons = [];\n      var connections = [];\n\n      // link id's to positions in the array\n      var ids = {};\n      for (var i = 0; i < list.length; i++) {\n        var neuron = list[i].neuron;\n        while (neuron.neuron) {\n          neuron = neuron.neuron;\n        }ids[neuron.ID] = i;\n\n        var copy = {\n          trace: {\n            elegibility: {},\n            extended: {}\n          },\n          state: neuron.state,\n          old: neuron.old,\n          activation: neuron.activation,\n          bias: neuron.bias,\n          layer: list[i].layer\n        };\n\n        copy.squash = neuron.squash == _Neuron2.default.squash.LOGISTIC ? 'LOGISTIC' : neuron.squash == _Neuron2.default.squash.TANH ? 'TANH' : neuron.squash == _Neuron2.default.squash.IDENTITY ? 'IDENTITY' : neuron.squash == _Neuron2.default.squash.HLIM ? 'HLIM' : neuron.squash == _Neuron2.default.squash.RELU ? 'RELU' : null;\n\n        neurons.push(copy);\n      }\n\n      for (var i = 0; i < list.length; i++) {\n        var neuron = list[i].neuron;\n        while (neuron.neuron) {\n          neuron = neuron.neuron;\n        }for (var j in neuron.connections.projected) {\n          var connection = neuron.connections.projected[j];\n          connections.push({\n            from: ids[connection.from.ID],\n            to: ids[connection.to.ID],\n            weight: connection.weight,\n            gater: connection.gater ? ids[connection.gater.ID] : null\n          });\n        }\n        if (neuron.selfconnected()) {\n          connections.push({\n            from: ids[neuron.ID],\n            to: ids[neuron.ID],\n            weight: neuron.selfconnection.weight,\n            gater: neuron.selfconnection.gater ? ids[neuron.selfconnection.gater.ID] : null\n          });\n        }\n      }\n\n      return {\n        neurons: neurons,\n        connections: connections\n      };\n    }\n\n    // export the topology into dot language which can be visualized as graphs using dot\n    /* example: ... console.log(net.toDotLang());\n                $ node example.js > example.dot\n                $ dot example.dot -Tpng > out.png\n    */\n\n  }, {\n    key: 'toDot',\n    value: function toDot(edgeConnection) {\n      if (!(typeof edgeConnection === 'undefined' ? 'undefined' : _typeof(edgeConnection))) edgeConnection = false;\n      var code = 'digraph nn {\\n    rankdir = BT\\n';\n      var layers = [this.layers.input].concat(this.layers.hidden, this.layers.output);\n      for (var i = 0; i < layers.length; i++) {\n        for (var j = 0; j < layers[i].connectedTo.length; j++) {\n          // projections\n          var connection = layers[i].connectedTo[j];\n          var layerTo = connection.to;\n          var size = connection.size;\n          var layerID = layers.indexOf(layers[i]);\n          var layerToID = layers.indexOf(layerTo);\n          /* http://stackoverflow.com/questions/26845540/connect-edges-with-graph-dot\n           * DOT does not support edge-to-edge connections\n           * This workaround produces somewhat weird graphs ...\n          */\n          if (edgeConnection) {\n            if (connection.gatedfrom.length) {\n              var fakeNode = 'fake' + layerID + '_' + layerToID;\n              code += '    ' + fakeNode + ' [label = \"\", shape = point, width = 0.01, height = 0.01]\\n';\n              code += '    ' + layerID + ' -> ' + fakeNode + ' [label = ' + size + ', arrowhead = none]\\n';\n              code += '    ' + fakeNode + ' -> ' + layerToID + '\\n';\n            } else code += '    ' + layerID + ' -> ' + layerToID + ' [label = ' + size + ']\\n';\n            for (var from in connection.gatedfrom) {\n              // gatings\n              var layerfrom = connection.gatedfrom[from].layer;\n              var layerfromID = layers.indexOf(layerfrom);\n              code += '    ' + layerfromID + ' -> ' + fakeNode + ' [color = blue]\\n';\n            }\n          } else {\n            code += '    ' + layerID + ' -> ' + layerToID + ' [label = ' + size + ']\\n';\n            for (var from in connection.gatedfrom) {\n              // gatings\n              var layerfrom = connection.gatedfrom[from].layer;\n              var layerfromID = layers.indexOf(layerfrom);\n              code += '    ' + layerfromID + ' -> ' + layerToID + ' [color = blue]\\n';\n            }\n          }\n        }\n      }\n      code += '}\\n';\n      return {\n        code: code,\n        link: 'https://chart.googleapis.com/chart?chl=' + escape(code.replace('/ /g', '+')) + '&cht=gv'\n      };\n    }\n\n    // returns a function that works as the activation of the network and can be used without depending on the library\n\n  }, {\n    key: 'standalone',\n    value: function standalone() {\n      if (!this.optimized) this.optimize();\n\n      var data = this.optimized.data;\n\n      // build activation function\n      var activation = 'function (input) {\\n';\n\n      // build inputs\n      for (var i = 0; i < data.inputs.length; i++) {\n        activation += 'F[' + data.inputs[i] + '] = input[' + i + '];\\n';\n      } // build network activation\n      for (var i = 0; i < data.activate.length; i++) {\n        // shouldn't this be layer?\n        for (var j = 0; j < data.activate[i].length; j++) {\n          activation += data.activate[i][j].join('') + '\\n';\n        }\n      }\n\n      // build outputs\n      activation += 'var output = [];\\n';\n      for (var i = 0; i < data.outputs.length; i++) {\n        activation += 'output[' + i + '] = F[' + data.outputs[i] + '];\\n';\n      }activation += 'return output;\\n}';\n\n      // reference all the positions in memory\n      var memory = activation.match(/F\\[(\\d+)\\]/g);\n      var dimension = 0;\n      var ids = {};\n\n      for (var i = 0; i < memory.length; i++) {\n        var tmp = memory[i].match(/\\d+/)[0];\n        if (!(tmp in ids)) {\n          ids[tmp] = dimension++;\n        }\n      }\n      var hardcode = 'F = {\\n';\n\n      for (var i in ids) {\n        hardcode += ids[i] + ': ' + this.optimized.memory[i] + ',\\n';\n      }hardcode = hardcode.substring(0, hardcode.length - 2) + '\\n};\\n';\n      hardcode = 'var run = ' + activation.replace(/F\\[(\\d+)]/g, function (index) {\n        return 'F[' + ids[index.match(/\\d+/)[0]] + ']';\n      }).replace('{\\n', '{\\n' + hardcode + '') + ';\\n';\n      hardcode += 'return run';\n\n      // return standalone function\n      return new Function(hardcode)();\n    }\n\n    // Return a HTML5 WebWorker specialized on training the network stored in `memory`.\n    // Train based on the given dataSet and options.\n    // The worker returns the updated `memory` when done.\n\n  }, {\n    key: 'worker',\n    value: function worker(memory, set, options) {\n      // Copy the options and set defaults (options might be different for each worker)\n      var workerOptions = {};\n      if (options) workerOptions = options;\n      workerOptions.rate = workerOptions.rate || .2;\n      workerOptions.iterations = workerOptions.iterations || 100000;\n      workerOptions.error = workerOptions.error || .005;\n      workerOptions.cost = workerOptions.cost || null;\n      workerOptions.crossValidate = workerOptions.crossValidate || null;\n\n      // Cost function might be different for each worker\n      var costFunction = '// REPLACED BY WORKER\\nvar cost = ' + (options && options.cost || this.cost || _Trainer2.default.cost.MSE) + ';\\n';\n      var workerFunction = Network.getWorkerSharedFunctions();\n      workerFunction = workerFunction.replace(/var cost = options && options\\.cost \\|\\| this\\.cost \\|\\| Trainer\\.cost\\.MSE;/g, costFunction);\n\n      // Set what we do when training is finished\n      workerFunction = workerFunction.replace('return results;', 'postMessage({action: \"done\", message: results, memoryBuffer: F}, [F.buffer]);');\n\n      // Replace log with postmessage\n      workerFunction = workerFunction.replace('console.log(\\'iterations\\', iterations, \\'error\\', error, \\'rate\\', currentRate)', 'postMessage({action: \\'log\\', message: {\\n' + 'iterations: iterations,\\n' + 'error: error,\\n' + 'rate: currentRate\\n' + '}\\n' + '})');\n\n      // Replace schedule with postmessage\n      workerFunction = workerFunction.replace('abort = this.schedule.do({ error: error, iterations: iterations, rate: currentRate })', 'postMessage({action: \\'schedule\\', message: {\\n' + 'iterations: iterations,\\n' + 'error: error,\\n' + 'rate: currentRate\\n' + '}\\n' + '})');\n\n      if (!this.optimized) this.optimize();\n\n      var hardcode = 'var inputs = ' + this.optimized.data.inputs.length + ';\\n';\n      hardcode += 'var outputs = ' + this.optimized.data.outputs.length + ';\\n';\n      hardcode += 'var F =  new Float64Array([' + this.optimized.memory.toString() + ']);\\n';\n      hardcode += 'var activate = ' + this.optimized.activate.toString() + ';\\n';\n      hardcode += 'var propagate = ' + this.optimized.propagate.toString() + ';\\n';\n      hardcode += 'onmessage = function(e) {\\n' + 'if (e.data.action == \\'startTraining\\') {\\n' + 'train(' + JSON.stringify(set) + ',' + JSON.stringify(workerOptions) + ');\\n' + '}\\n' + '}';\n\n      var workerSourceCode = workerFunction + '\\n' + hardcode;\n      var blob = new Blob([workerSourceCode]);\n      var blobURL = window.URL.createObjectURL(blob);\n\n      return new Worker(blobURL);\n    }\n\n    // returns a copy of the network\n\n  }, {\n    key: 'clone',\n    value: function clone() {\n      return Network.fromJSON(this.toJSON());\n    }\n\n    /**\n     * Creates a static String to store the source code of the functions\n     *  that are identical for all the workers (train, _trainSet, test)\n     *\n     * @return {String} Source code that can train a network inside a worker.\n     * @static\n     */\n\n  }], [{\n    key: 'getWorkerSharedFunctions',\n    value: function getWorkerSharedFunctions() {\n      // If we already computed the source code for the shared functions\n      if (typeof Network._SHARED_WORKER_FUNCTIONS !== 'undefined') return Network._SHARED_WORKER_FUNCTIONS;\n\n      // Otherwise compute and return the source code\n      // We compute them by simply copying the source code of the train, _trainSet and test functions\n      //  using the .toString() method\n\n      // Load and name the train function\n      var train_f = _Trainer2.default.prototype.train.toString();\n      train_f = train_f.replace(/this._trainSet/g, '_trainSet');\n      train_f = train_f.replace(/this.test/g, 'test');\n      train_f = train_f.replace(/this.crossValidate/g, 'crossValidate');\n      train_f = train_f.replace('crossValidate = true', '// REMOVED BY WORKER');\n\n      // Load and name the _trainSet function\n      var _trainSet_f = _Trainer2.default.prototype._trainSet.toString().replace(/this.network./g, '');\n\n      // Load and name the test function\n      var test_f = _Trainer2.default.prototype.test.toString().replace(/this.network./g, '');\n\n      return Network._SHARED_WORKER_FUNCTIONS = train_f + '\\n' + _trainSet_f + '\\n' + test_f;\n    }\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(json) {\n      var neurons = [];\n\n      var layers = {\n        input: new _Layer2.default(),\n        hidden: [],\n        output: new _Layer2.default()\n      };\n\n      for (var i = 0; i < json.neurons.length; i++) {\n        var config = json.neurons[i];\n\n        var neuron = new _Neuron2.default();\n        neuron.trace.elegibility = {};\n        neuron.trace.extended = {};\n        neuron.state = config.state;\n        neuron.old = config.old;\n        neuron.activation = config.activation;\n        neuron.bias = config.bias;\n        neuron.squash = config.squash in _Neuron2.default.squash ? _Neuron2.default.squash[config.squash] : _Neuron2.default.squash.LOGISTIC;\n        neurons.push(neuron);\n\n        if (config.layer == 'input') layers.input.add(neuron);else if (config.layer == 'output') layers.output.add(neuron);else {\n          if (typeof layers.hidden[config.layer] == 'undefined') layers.hidden[config.layer] = new _Layer2.default();\n          layers.hidden[config.layer].add(neuron);\n        }\n      }\n\n      for (var i = 0; i < json.connections.length; i++) {\n        var config = json.connections[i];\n        var from = neurons[config.from];\n        var to = neurons[config.to];\n        var weight = config.weight;\n        var gater = neurons[config.gater];\n\n        var connection = from.project(to, weight);\n        if (gater) gater.gate(connection);\n      }\n\n      return new Network(layers);\n    }\n  }]);\n\n  return Network;\n}();\n\nexports.default = Network;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Connection = __webpack_require__(5);\n\nvar _Connection2 = _interopRequireDefault(_Connection);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar neurons = 0;\n\n// squashing functions\nvar squash = {\n  // eq. 5 & 5'\n  LOGISTIC: function LOGISTIC(x, derivate) {\n    var fx = 1 / (1 + Math.exp(-x));\n    if (!derivate) return fx;\n    return fx * (1 - fx);\n  },\n  TANH: function TANH(x, derivate) {\n    if (derivate) return 1 - Math.pow(Math.tanh(x), 2);\n    return Math.tanh(x);\n  },\n  IDENTITY: function IDENTITY(x, derivate) {\n    return derivate ? 1 : x;\n  },\n  HLIM: function HLIM(x, derivate) {\n    return derivate ? 1 : x > 0 ? 1 : 0;\n  },\n  RELU: function RELU(x, derivate) {\n    if (derivate) return x > 0 ? 1 : 0;\n    return x > 0 ? x : 0;\n  }\n};\n\nvar Neuron = function () {\n  function Neuron() {\n    _classCallCheck(this, Neuron);\n\n    this.ID = Neuron.uid();\n\n    this.connections = {\n      inputs: {},\n      projected: {},\n      gated: {}\n    };\n    this.error = {\n      responsibility: 0,\n      projected: 0,\n      gated: 0\n    };\n    this.trace = {\n      elegibility: {},\n      extended: {},\n      influences: {}\n    };\n    this.state = 0;\n    this.old = 0;\n    this.activation = 0;\n    this.selfconnection = new _Connection2.default(this, this, 0); // weight = 0 -> not connected\n    this.squash = Neuron.squash.LOGISTIC;\n    this.neighboors = {};\n    this.bias = Math.random() * .2 - .1;\n  }\n\n  // activate the neuron\n\n\n  _createClass(Neuron, [{\n    key: 'activate',\n    value: function activate(input) {\n      // activation from enviroment (for input neurons)\n      if (typeof input != 'undefined') {\n        this.activation = input;\n        this.derivative = 0;\n        this.bias = 0;\n        return this.activation;\n      }\n\n      // old state\n      this.old = this.state;\n\n      // eq. 15\n      this.state = this.selfconnection.gain * this.selfconnection.weight * this.state + this.bias;\n\n      for (var i in this.connections.inputs) {\n        var input = this.connections.inputs[i];\n        this.state += input.from.activation * input.weight * input.gain;\n      }\n\n      // eq. 16\n      this.activation = this.squash(this.state);\n\n      // f'(s)\n      this.derivative = this.squash(this.state, true);\n\n      // update traces\n      var influences = [];\n      for (var id in this.trace.extended) {\n        // extended elegibility trace\n        var neuron = this.neighboors[id];\n\n        // if gated neuron's selfconnection is gated by this unit, the influence keeps track of the neuron's old state\n        var influence = neuron.selfconnection.gater == this ? neuron.old : 0;\n\n        // index runs over all the incoming connections to the gated neuron that are gated by this unit\n        for (var incoming in this.trace.influences[neuron.ID]) {\n          // captures the effect that has an input connection to this unit, on a neuron that is gated by this unit\n          influence += this.trace.influences[neuron.ID][incoming].weight * this.trace.influences[neuron.ID][incoming].from.activation;\n        }\n        influences[neuron.ID] = influence;\n      }\n\n      for (var i in this.connections.inputs) {\n        var input = this.connections.inputs[i];\n\n        // elegibility trace - Eq. 17\n        this.trace.elegibility[input.ID] = this.selfconnection.gain * this.selfconnection.weight * this.trace.elegibility[input.ID] + input.gain * input.from.activation;\n\n        for (var id in this.trace.extended) {\n          // extended elegibility trace\n          var xtrace = this.trace.extended[id];\n          var neuron = this.neighboors[id];\n          var influence = influences[neuron.ID];\n\n          // eq. 18\n          xtrace[input.ID] = neuron.selfconnection.gain * neuron.selfconnection.weight * xtrace[input.ID] + this.derivative * this.trace.elegibility[input.ID] * influence;\n        }\n      }\n\n      //  update gated connection's gains\n      for (var connection in this.connections.gated) {\n        this.connections.gated[connection].gain = this.activation;\n      }\n\n      return this.activation;\n    }\n\n    // back-propagate the error\n\n  }, {\n    key: 'propagate',\n    value: function propagate(rate, target) {\n      // error accumulator\n      var error = 0;\n\n      // whether or not this neuron is in the output layer\n      var isOutput = typeof target != 'undefined';\n\n      // output neurons get their error from the enviroment\n      if (isOutput) this.error.responsibility = this.error.projected = target - this.activation; // Eq. 10\n\n      else // the rest of the neuron compute their error responsibilities by backpropagation\n        {\n          // error responsibilities from all the connections projected from this neuron\n          for (var id in this.connections.projected) {\n            var connection = this.connections.projected[id];\n            var neuron = connection.to;\n            // Eq. 21\n            error += neuron.error.responsibility * connection.gain * connection.weight;\n          }\n\n          // projected error responsibility\n          this.error.projected = this.derivative * error;\n\n          error = 0;\n          // error responsibilities from all the connections gated by this neuron\n          for (var id in this.trace.extended) {\n            var neuron = this.neighboors[id]; // gated neuron\n            var influence = neuron.selfconnection.gater == this ? neuron.old : 0; // if gated neuron's selfconnection is gated by this neuron\n\n            // index runs over all the connections to the gated neuron that are gated by this neuron\n            for (var input in this.trace.influences[id]) {\n              // captures the effect that the input connection of this neuron have, on a neuron which its input/s is/are gated by this neuron\n              influence += this.trace.influences[id][input].weight * this.trace.influences[neuron.ID][input].from.activation;\n            }\n            // eq. 22\n            error += neuron.error.responsibility * influence;\n          }\n\n          // gated error responsibility\n          this.error.gated = this.derivative * error;\n\n          // error responsibility - Eq. 23\n          this.error.responsibility = this.error.projected + this.error.gated;\n        }\n\n      // learning rate\n      rate = rate || .1;\n\n      // adjust all the neuron's incoming connections\n      for (var id in this.connections.inputs) {\n        var input = this.connections.inputs[id];\n\n        // Eq. 24\n        var gradient = this.error.projected * this.trace.elegibility[input.ID];\n        for (var id in this.trace.extended) {\n          var neuron = this.neighboors[id];\n          gradient += neuron.error.responsibility * this.trace.extended[neuron.ID][input.ID];\n        }\n        input.weight += rate * gradient; // adjust weights - aka learn\n      }\n\n      // adjust bias\n      this.bias += rate * this.error.responsibility;\n    }\n  }, {\n    key: 'project',\n    value: function project(neuron, weight) {\n      // self-connection\n      if (neuron == this) {\n        this.selfconnection.weight = 1;\n        return this.selfconnection;\n      }\n\n      // check if connection already exists\n      var connected = this.connected(neuron);\n      if (connected && connected.type == 'projected') {\n        // update connection\n        if (typeof weight != 'undefined') connected.connection.weight = weight;\n        // return existing connection\n        return connected.connection;\n      } else {\n        // create a new connection\n        var connection = new _Connection2.default(this, neuron, weight);\n      }\n\n      // reference all the connections and traces\n      this.connections.projected[connection.ID] = connection;\n      this.neighboors[neuron.ID] = neuron;\n      neuron.connections.inputs[connection.ID] = connection;\n      neuron.trace.elegibility[connection.ID] = 0;\n\n      for (var id in neuron.trace.extended) {\n        var trace = neuron.trace.extended[id];\n        trace[connection.ID] = 0;\n      }\n\n      return connection;\n    }\n  }, {\n    key: 'gate',\n    value: function gate(connection) {\n      // add connection to gated list\n      this.connections.gated[connection.ID] = connection;\n\n      var neuron = connection.to;\n      if (!(neuron.ID in this.trace.extended)) {\n        // extended trace\n        this.neighboors[neuron.ID] = neuron;\n        var xtrace = this.trace.extended[neuron.ID] = {};\n        for (var id in this.connections.inputs) {\n          var input = this.connections.inputs[id];\n          xtrace[input.ID] = 0;\n        }\n      }\n\n      // keep track\n      if (neuron.ID in this.trace.influences) this.trace.influences[neuron.ID].push(connection);else this.trace.influences[neuron.ID] = [connection];\n\n      // set gater\n      connection.gater = this;\n    }\n\n    // returns true or false whether the neuron is self-connected or not\n\n  }, {\n    key: 'selfconnected',\n    value: function selfconnected() {\n      return this.selfconnection.weight !== 0;\n    }\n\n    // returns true or false whether the neuron is connected to another neuron (parameter)\n\n  }, {\n    key: 'connected',\n    value: function connected(neuron) {\n      var result = {\n        type: null,\n        connection: false\n      };\n\n      if (this == neuron) {\n        if (this.selfconnected()) {\n          result.type = 'selfconnection';\n          result.connection = this.selfconnection;\n          return result;\n        } else return false;\n      }\n\n      for (var type in this.connections) {\n        for (var connection in this.connections[type]) {\n          var connection = this.connections[type][connection];\n          if (connection.to == neuron) {\n            result.type = type;\n            result.connection = connection;\n            return result;\n          } else if (connection.from == neuron) {\n            result.type = type;\n            result.connection = connection;\n            return result;\n          }\n        }\n      }\n\n      return false;\n    }\n\n    // clears all the traces (the neuron forgets it's context, but the connections remain intact)\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      for (var trace in this.trace.elegibility) {\n        this.trace.elegibility[trace] = 0;\n      }\n\n      for (var trace in this.trace.extended) {\n        for (var extended in this.trace.extended[trace]) {\n          this.trace.extended[trace][extended] = 0;\n        }\n      }\n\n      this.error.responsibility = this.error.projected = this.error.gated = 0;\n    }\n\n    // all the connections are randomized and the traces are cleared\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.clear();\n\n      for (var type in this.connections) {\n        for (var connection in this.connections[type]) {\n          this.connections[type][connection].weight = Math.random() * .2 - .1;\n        }\n      }\n\n      this.bias = Math.random() * .2 - .1;\n      this.old = this.state = this.activation = 0;\n    }\n\n    // hardcodes the behaviour of the neuron into an optimized function\n\n  }, {\n    key: 'optimize',\n    value: function optimize(optimized, layer) {\n\n      optimized = optimized || {};\n      var store_activation = [];\n      var store_trace = [];\n      var store_propagation = [];\n      var varID = optimized.memory || 0;\n      var neurons = optimized.neurons || 1;\n      var inputs = optimized.inputs || [];\n      var targets = optimized.targets || [];\n      var outputs = optimized.outputs || [];\n      var variables = optimized.variables || {};\n      var activation_sentences = optimized.activation_sentences || [];\n      var trace_sentences = optimized.trace_sentences || [];\n      var propagation_sentences = optimized.propagation_sentences || [];\n      var layers = optimized.layers || { __count: 0, __neuron: 0 };\n\n      // allocate sentences\n      var allocate = function allocate(store) {\n        var allocated = layer in layers && store[layers.__count];\n        if (!allocated) {\n          layers.__count = store.push([]) - 1;\n          layers[layer] = layers.__count;\n        }\n      };\n      allocate(activation_sentences);\n      allocate(trace_sentences);\n      allocate(propagation_sentences);\n      var currentLayer = layers.__count;\n\n      // get/reserve space in memory by creating a unique ID for a variablel\n      var getVar = function getVar() {\n        var args = Array.prototype.slice.call(arguments);\n\n        if (args.length == 1) {\n          if (args[0] == 'target') {\n            var id = 'target_' + targets.length;\n            targets.push(varID);\n          } else var id = args[0];\n          if (id in variables) return variables[id];\n          return variables[id] = {\n            value: 0,\n            id: varID++\n          };\n        } else {\n          var extended = args.length > 2;\n          if (extended) var value = args.pop();\n\n          var unit = args.shift();\n          var prop = args.pop();\n\n          if (!extended) var value = unit[prop];\n\n          var id = prop + '_';\n          for (var i = 0; i < args.length; i++) {\n            id += args[i] + '_';\n          }id += unit.ID;\n          if (id in variables) return variables[id];\n\n          return variables[id] = {\n            value: value,\n            id: varID++\n          };\n        }\n      };\n\n      // build sentence\n      var buildSentence = function buildSentence() {\n        var args = Array.prototype.slice.call(arguments);\n        var store = args.pop();\n        var sentence = '';\n        for (var i = 0; i < args.length; i++) {\n          if (typeof args[i] == 'string') sentence += args[i];else sentence += 'F[' + args[i].id + ']';\n        }store.push(sentence + ';');\n      };\n\n      // helper to check if an object is empty\n      var isEmpty = function isEmpty(obj) {\n        for (var prop in obj) {\n          if (obj.hasOwnProperty(prop)) return false;\n        }\n        return true;\n      };\n\n      // characteristics of the neuron\n      var noProjections = isEmpty(this.connections.projected);\n      var noGates = isEmpty(this.connections.gated);\n      var isInput = layer == 'input' ? true : isEmpty(this.connections.inputs);\n      var isOutput = layer == 'output' ? true : noProjections && noGates;\n\n      // optimize neuron's behaviour\n      var rate = getVar('rate');\n      var activation = getVar(this, 'activation');\n      if (isInput) inputs.push(activation.id);else {\n        activation_sentences[currentLayer].push(store_activation);\n        trace_sentences[currentLayer].push(store_trace);\n        propagation_sentences[currentLayer].push(store_propagation);\n        var old = getVar(this, 'old');\n        var state = getVar(this, 'state');\n        var bias = getVar(this, 'bias');\n        if (this.selfconnection.gater) var self_gain = getVar(this.selfconnection, 'gain');\n        if (this.selfconnected()) var self_weight = getVar(this.selfconnection, 'weight');\n        buildSentence(old, ' = ', state, store_activation);\n        if (this.selfconnected()) {\n          if (this.selfconnection.gater) buildSentence(state, ' = ', self_gain, ' * ', self_weight, ' * ', state, ' + ', bias, store_activation);else buildSentence(state, ' = ', self_weight, ' * ', state, ' + ', bias, store_activation);\n        } else buildSentence(state, ' = ', bias, store_activation);\n        for (var i in this.connections.inputs) {\n          var input = this.connections.inputs[i];\n          var input_activation = getVar(input.from, 'activation');\n          var input_weight = getVar(input, 'weight');\n          if (input.gater) var input_gain = getVar(input, 'gain');\n          if (this.connections.inputs[i].gater) buildSentence(state, ' += ', input_activation, ' * ', input_weight, ' * ', input_gain, store_activation);else buildSentence(state, ' += ', input_activation, ' * ', input_weight, store_activation);\n        }\n        var derivative = getVar(this, 'derivative');\n        switch (this.squash) {\n          case Neuron.squash.LOGISTIC:\n            buildSentence(activation, ' = (1 / (1 + Math.exp(-', state, ')))', store_activation);\n            buildSentence(derivative, ' = ', activation, ' * (1 - ', activation, ')', store_activation);\n            break;\n          case Neuron.squash.TANH:\n            var eP = getVar('aux');\n            var eN = getVar('aux_2');\n            buildSentence(eP, ' = Math.exp(', state, ')', store_activation);\n            buildSentence(eN, ' = 1 / ', eP, store_activation);\n            buildSentence(activation, ' = (', eP, ' - ', eN, ') / (', eP, ' + ', eN, ')', store_activation);\n            buildSentence(derivative, ' = 1 - (', activation, ' * ', activation, ')', store_activation);\n            break;\n          case Neuron.squash.IDENTITY:\n            buildSentence(activation, ' = ', state, store_activation);\n            buildSentence(derivative, ' = 1', store_activation);\n            break;\n          case Neuron.squash.HLIM:\n            buildSentence(activation, ' = +(', state, ' > 0)', store_activation);\n            buildSentence(derivative, ' = 1', store_activation);\n            break;\n          case Neuron.squash.RELU:\n            buildSentence(activation, ' = ', state, ' > 0 ? ', state, ' : 0', store_activation);\n            buildSentence(derivative, ' = ', state, ' > 0 ? 1 : 0', store_activation);\n            break;\n        }\n\n        for (var id in this.trace.extended) {\n          // calculate extended elegibility traces in advance\n          var neuron = this.neighboors[id];\n          var influence = getVar('influences[' + neuron.ID + ']');\n          var neuron_old = getVar(neuron, 'old');\n          var initialized = false;\n          if (neuron.selfconnection.gater == this) {\n            buildSentence(influence, ' = ', neuron_old, store_trace);\n            initialized = true;\n          }\n          for (var incoming in this.trace.influences[neuron.ID]) {\n            var incoming_weight = getVar(this.trace.influences[neuron.ID][incoming], 'weight');\n            var incoming_activation = getVar(this.trace.influences[neuron.ID][incoming].from, 'activation');\n\n            if (initialized) buildSentence(influence, ' += ', incoming_weight, ' * ', incoming_activation, store_trace);else {\n              buildSentence(influence, ' = ', incoming_weight, ' * ', incoming_activation, store_trace);\n              initialized = true;\n            }\n          }\n        }\n\n        for (var i in this.connections.inputs) {\n          var input = this.connections.inputs[i];\n          if (input.gater) var input_gain = getVar(input, 'gain');\n          var input_activation = getVar(input.from, 'activation');\n          var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n          if (this.selfconnected()) {\n            if (this.selfconnection.gater) {\n              if (input.gater) buildSentence(trace, ' = ', self_gain, ' * ', self_weight, ' * ', trace, ' + ', input_gain, ' * ', input_activation, store_trace);else buildSentence(trace, ' = ', self_gain, ' * ', self_weight, ' * ', trace, ' + ', input_activation, store_trace);\n            } else {\n              if (input.gater) buildSentence(trace, ' = ', self_weight, ' * ', trace, ' + ', input_gain, ' * ', input_activation, store_trace);else buildSentence(trace, ' = ', self_weight, ' * ', trace, ' + ', input_activation, store_trace);\n            }\n          } else {\n            if (input.gater) buildSentence(trace, ' = ', input_gain, ' * ', input_activation, store_trace);else buildSentence(trace, ' = ', input_activation, store_trace);\n          }\n          for (var id in this.trace.extended) {\n            // extended elegibility trace\n            var neuron = this.neighboors[id];\n            var influence = getVar('influences[' + neuron.ID + ']');\n\n            var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n            var xtrace = getVar(this, 'trace', 'extended', neuron.ID, input.ID, this.trace.extended[neuron.ID][input.ID]);\n            if (neuron.selfconnected()) var neuron_self_weight = getVar(neuron.selfconnection, 'weight');\n            if (neuron.selfconnection.gater) var neuron_self_gain = getVar(neuron.selfconnection, 'gain');\n            if (neuron.selfconnected()) {\n              if (neuron.selfconnection.gater) buildSentence(xtrace, ' = ', neuron_self_gain, ' * ', neuron_self_weight, ' * ', xtrace, ' + ', derivative, ' * ', trace, ' * ', influence, store_trace);else buildSentence(xtrace, ' = ', neuron_self_weight, ' * ', xtrace, ' + ', derivative, ' * ', trace, ' * ', influence, store_trace);\n            } else buildSentence(xtrace, ' = ', derivative, ' * ', trace, ' * ', influence, store_trace);\n          }\n        }\n        for (var connection in this.connections.gated) {\n          var gated_gain = getVar(this.connections.gated[connection], 'gain');\n          buildSentence(gated_gain, ' = ', activation, store_activation);\n        }\n      }\n      if (!isInput) {\n        var responsibility = getVar(this, 'error', 'responsibility', this.error.responsibility);\n        if (isOutput) {\n          var target = getVar('target');\n          buildSentence(responsibility, ' = ', target, ' - ', activation, store_propagation);\n          for (var id in this.connections.inputs) {\n            var input = this.connections.inputs[id];\n            var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n            var input_weight = getVar(input, 'weight');\n            buildSentence(input_weight, ' += ', rate, ' * (', responsibility, ' * ', trace, ')', store_propagation);\n          }\n          outputs.push(activation.id);\n        } else {\n          if (!noProjections && !noGates) {\n            var error = getVar('aux');\n            for (var id in this.connections.projected) {\n              var connection = this.connections.projected[id];\n              var neuron = connection.to;\n              var connection_weight = getVar(connection, 'weight');\n              var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n              if (connection.gater) {\n                var connection_gain = getVar(connection, 'gain');\n                buildSentence(error, ' += ', neuron_responsibility, ' * ', connection_gain, ' * ', connection_weight, store_propagation);\n              } else buildSentence(error, ' += ', neuron_responsibility, ' * ', connection_weight, store_propagation);\n            }\n            var projected = getVar(this, 'error', 'projected', this.error.projected);\n            buildSentence(projected, ' = ', derivative, ' * ', error, store_propagation);\n            buildSentence(error, ' = 0', store_propagation);\n            for (var id in this.trace.extended) {\n              var neuron = this.neighboors[id];\n              var influence = getVar('aux_2');\n              var neuron_old = getVar(neuron, 'old');\n              if (neuron.selfconnection.gater == this) buildSentence(influence, ' = ', neuron_old, store_propagation);else buildSentence(influence, ' = 0', store_propagation);\n              for (var input in this.trace.influences[neuron.ID]) {\n                var connection = this.trace.influences[neuron.ID][input];\n                var connection_weight = getVar(connection, 'weight');\n                var neuron_activation = getVar(connection.from, 'activation');\n                buildSentence(influence, ' += ', connection_weight, ' * ', neuron_activation, store_propagation);\n              }\n              var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n              buildSentence(error, ' += ', neuron_responsibility, ' * ', influence, store_propagation);\n            }\n            var gated = getVar(this, 'error', 'gated', this.error.gated);\n            buildSentence(gated, ' = ', derivative, ' * ', error, store_propagation);\n            buildSentence(responsibility, ' = ', projected, ' + ', gated, store_propagation);\n            for (var id in this.connections.inputs) {\n              var input = this.connections.inputs[id];\n              var gradient = getVar('aux');\n              var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n              buildSentence(gradient, ' = ', projected, ' * ', trace, store_propagation);\n              for (var id in this.trace.extended) {\n                var neuron = this.neighboors[id];\n                var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n                var xtrace = getVar(this, 'trace', 'extended', neuron.ID, input.ID, this.trace.extended[neuron.ID][input.ID]);\n                buildSentence(gradient, ' += ', neuron_responsibility, ' * ', xtrace, store_propagation);\n              }\n              var input_weight = getVar(input, 'weight');\n              buildSentence(input_weight, ' += ', rate, ' * ', gradient, store_propagation);\n            }\n          } else if (noGates) {\n            buildSentence(responsibility, ' = 0', store_propagation);\n            for (var id in this.connections.projected) {\n              var connection = this.connections.projected[id];\n              var neuron = connection.to;\n              var connection_weight = getVar(connection, 'weight');\n              var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n              if (connection.gater) {\n                var connection_gain = getVar(connection, 'gain');\n                buildSentence(responsibility, ' += ', neuron_responsibility, ' * ', connection_gain, ' * ', connection_weight, store_propagation);\n              } else buildSentence(responsibility, ' += ', neuron_responsibility, ' * ', connection_weight, store_propagation);\n            }\n            buildSentence(responsibility, ' *= ', derivative, store_propagation);\n            for (var id in this.connections.inputs) {\n              var input = this.connections.inputs[id];\n              var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n              var input_weight = getVar(input, 'weight');\n              buildSentence(input_weight, ' += ', rate, ' * (', responsibility, ' * ', trace, ')', store_propagation);\n            }\n          } else if (noProjections) {\n            buildSentence(responsibility, ' = 0', store_propagation);\n            for (var id in this.trace.extended) {\n              var neuron = this.neighboors[id];\n              var influence = getVar('aux');\n              var neuron_old = getVar(neuron, 'old');\n              if (neuron.selfconnection.gater == this) buildSentence(influence, ' = ', neuron_old, store_propagation);else buildSentence(influence, ' = 0', store_propagation);\n              for (var input in this.trace.influences[neuron.ID]) {\n                var connection = this.trace.influences[neuron.ID][input];\n                var connection_weight = getVar(connection, 'weight');\n                var neuron_activation = getVar(connection.from, 'activation');\n                buildSentence(influence, ' += ', connection_weight, ' * ', neuron_activation, store_propagation);\n              }\n              var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n              buildSentence(responsibility, ' += ', neuron_responsibility, ' * ', influence, store_propagation);\n            }\n            buildSentence(responsibility, ' *= ', derivative, store_propagation);\n            for (var id in this.connections.inputs) {\n              var input = this.connections.inputs[id];\n              var gradient = getVar('aux');\n              buildSentence(gradient, ' = 0', store_propagation);\n              for (var id in this.trace.extended) {\n                var neuron = this.neighboors[id];\n                var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n                var xtrace = getVar(this, 'trace', 'extended', neuron.ID, input.ID, this.trace.extended[neuron.ID][input.ID]);\n                buildSentence(gradient, ' += ', neuron_responsibility, ' * ', xtrace, store_propagation);\n              }\n              var input_weight = getVar(input, 'weight');\n              buildSentence(input_weight, ' += ', rate, ' * ', gradient, store_propagation);\n            }\n          }\n        }\n        buildSentence(bias, ' += ', rate, ' * ', responsibility, store_propagation);\n      }\n      return {\n        memory: varID,\n        neurons: neurons + 1,\n        inputs: inputs,\n        outputs: outputs,\n        targets: targets,\n        variables: variables,\n        activation_sentences: activation_sentences,\n        trace_sentences: trace_sentences,\n        propagation_sentences: propagation_sentences,\n        layers: layers\n      };\n    }\n  }], [{\n    key: 'uid',\n    value: function uid() {\n      return neurons++;\n    }\n  }, {\n    key: 'quantity',\n    value: function quantity() {\n      return {\n        neurons: neurons,\n        connections: _Connection.connections\n      };\n    }\n  }]);\n\n  return Neuron;\n}();\n\nNeuron.squash = squash;\nexports.default = Neuron;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//+ Jonas Raoni Soares Silva\n//@ http://jsfromhell.com/array/shuffle [v1.0]\nfunction shuffleInplace(o) {\n  //v1.0\n  for (var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x) {}\n  return o;\n};\n\n// Built-in cost functions\nvar cost = {\n  // Eq. 9\n  CROSS_ENTROPY: function CROSS_ENTROPY(target, output) {\n    var crossentropy = 0;\n    for (var i in output) {\n      crossentropy -= target[i] * Math.log(output[i] + 1e-15) + (1 - target[i]) * Math.log(1 + 1e-15 - output[i]);\n    } // +1e-15 is a tiny push away to avoid Math.log(0)\n    return crossentropy;\n  },\n  MSE: function MSE(target, output) {\n    var mse = 0;\n    for (var i = 0; i < output.length; i++) {\n      mse += Math.pow(target[i] - output[i], 2);\n    }return mse / output.length;\n  },\n  BINARY: function BINARY(target, output) {\n    var misses = 0;\n    for (var i = 0; i < output.length; i++) {\n      misses += Math.round(target[i] * 2) != Math.round(output[i] * 2);\n    }return misses;\n  }\n};\n\nvar Trainer = function () {\n  function Trainer(network, options) {\n    _classCallCheck(this, Trainer);\n\n    options = options || {};\n    this.network = network;\n    this.rate = options.rate || .2;\n    this.iterations = options.iterations || 100000;\n    this.error = options.error || .005;\n    this.cost = options.cost || null;\n    this.crossValidate = options.crossValidate || null;\n  }\n\n  // trains any given set to a network\n\n\n  _createClass(Trainer, [{\n    key: 'train',\n    value: function train(set, options) {\n      var error = 1;\n      var iterations = bucketSize = 0;\n      var abort = false;\n      var currentRate;\n      var cost = options && options.cost || this.cost || Trainer.cost.MSE;\n      var crossValidate = false,\n          testSet,\n          trainSet;\n\n      var start = Date.now();\n\n      if (options) {\n        if (options.iterations) this.iterations = options.iterations;\n        if (options.error) this.error = options.error;\n        if (options.rate) this.rate = options.rate;\n        if (options.cost) this.cost = options.cost;\n        if (options.schedule) this.schedule = options.schedule;\n        if (options.customLog) {\n          // for backward compatibility with code that used customLog\n          console.log('Deprecated: use schedule instead of customLog');\n          this.schedule = options.customLog;\n        }\n        if (this.crossValidate || options.crossValidate) {\n          if (!this.crossValidate) this.crossValidate = {};\n          crossValidate = true;\n          if (options.crossValidate.testSize) this.crossValidate.testSize = options.crossValidate.testSize;\n          if (options.crossValidate.testError) this.crossValidate.testError = options.crossValidate.testError;\n        }\n      }\n\n      currentRate = this.rate;\n      if (Array.isArray(this.rate)) {\n        var bucketSize = Math.floor(this.iterations / this.rate.length);\n      }\n\n      if (crossValidate) {\n        var numTrain = Math.ceil((1 - this.crossValidate.testSize) * set.length);\n        trainSet = set.slice(0, numTrain);\n        testSet = set.slice(numTrain);\n      }\n\n      var lastError = 0;\n      while (!abort && iterations < this.iterations && error > this.error) {\n        if (crossValidate && error <= this.crossValidate.testError) {\n          break;\n        }\n\n        var currentSetSize = set.length;\n        error = 0;\n        iterations++;\n\n        if (bucketSize > 0) {\n          var currentBucket = Math.floor(iterations / bucketSize);\n          currentRate = this.rate[currentBucket] || currentRate;\n        }\n\n        if (typeof this.rate === 'function') {\n          currentRate = this.rate(iterations, lastError);\n        }\n\n        if (crossValidate) {\n          this._trainSet(trainSet, currentRate, cost);\n          error += this.test(testSet).error;\n          currentSetSize = 1;\n        } else {\n          error += this._trainSet(set, currentRate, cost);\n          currentSetSize = set.length;\n        }\n\n        // check error\n        error /= currentSetSize;\n        lastError = error;\n\n        if (options) {\n          if (this.schedule && this.schedule.every && iterations % this.schedule.every == 0) abort = this.schedule.do({ error: error, iterations: iterations, rate: currentRate });else if (options.log && iterations % options.log == 0) {\n            console.log('iterations', iterations, 'error', error, 'rate', currentRate);\n          }\n          ;\n          if (options.shuffle) shuffleInplace(set);\n        }\n      }\n\n      var results = {\n        error: error,\n        iterations: iterations,\n        time: Date.now() - start\n      };\n\n      return results;\n    }\n\n    // trains any given set to a network, using a WebWorker (only for the browser). Returns a Promise of the results.\n\n  }, {\n    key: 'trainAsync',\n    value: function trainAsync(set, options) {\n      var train = this.workerTrain.bind(this);\n      return new Promise(function (resolve, reject) {\n        try {\n          train(set, resolve, options, true);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n\n    // preforms one training epoch and returns the error (private function used in this.train)\n\n  }, {\n    key: '_trainSet',\n    value: function _trainSet(set, currentRate, costFunction) {\n      var errorSum = 0;\n      for (var i = 0; i < set.length; i++) {\n        var input = set[i].input;\n        var target = set[i].output;\n\n        var output = this.network.activate(input);\n        this.network.propagate(currentRate, target);\n\n        errorSum += costFunction(target, output);\n      }\n      return errorSum;\n    }\n\n    // tests a set and returns the error and elapsed time\n\n  }, {\n    key: 'test',\n    value: function test(set, options) {\n      var error = 0;\n      var input, output, target;\n      var cost = options && options.cost || this.cost || Trainer.cost.MSE;\n\n      var start = Date.now();\n\n      for (var i = 0; i < set.length; i++) {\n        input = set[i].input;\n        target = set[i].output;\n        output = this.network.activate(input);\n        error += cost(target, output);\n      }\n\n      error /= set.length;\n\n      var results = {\n        error: error,\n        time: Date.now() - start\n      };\n\n      return results;\n    }\n\n    // trains any given set to a network using a WebWorker [deprecated: use trainAsync instead]\n\n  }, {\n    key: 'workerTrain',\n    value: function workerTrain(set, callback, options, suppressWarning) {\n      if (!suppressWarning) {\n        console.warn('Deprecated: do not use `workerTrain`, use `trainAsync` instead.');\n      }\n      var that = this;\n\n      if (!this.network.optimized) this.network.optimize();\n\n      // Create a new worker\n      var worker = this.network.worker(this.network.optimized.memory, set, options);\n\n      // train the worker\n      worker.onmessage = function (e) {\n        switch (e.data.action) {\n          case 'done':\n            var iterations = e.data.message.iterations;\n            var error = e.data.message.error;\n            var time = e.data.message.time;\n\n            that.network.optimized.ownership(e.data.memoryBuffer);\n\n            // Done callback\n            callback({\n              error: error,\n              iterations: iterations,\n              time: time\n            });\n\n            // Delete the worker and all its associated memory\n            worker.terminate();\n            break;\n\n          case 'log':\n            console.log(e.data.message);\n\n          case 'schedule':\n            if (options && options.schedule && typeof options.schedule.do === 'function') {\n              var scheduled = options.schedule.do;\n              scheduled(e.data.message);\n            }\n            break;\n        }\n      };\n\n      // Start the worker\n      worker.postMessage({ action: 'startTraining' });\n    }\n\n    // trains an XOR to the network\n\n  }, {\n    key: 'XOR',\n    value: function XOR(options) {\n      if (this.network.inputs() != 2 || this.network.outputs() != 1) throw new Error('Incompatible network (2 inputs, 1 output)');\n\n      var defaults = {\n        iterations: 100000,\n        log: false,\n        shuffle: true,\n        cost: Trainer.cost.MSE\n      };\n\n      if (options) for (var i in options) {\n        defaults[i] = options[i];\n      }return this.train([{\n        input: [0, 0],\n        output: [0]\n      }, {\n        input: [1, 0],\n        output: [1]\n      }, {\n        input: [0, 1],\n        output: [1]\n      }, {\n        input: [1, 1],\n        output: [0]\n      }], defaults);\n    }\n\n    // trains the network to pass a Distracted Sequence Recall test\n\n  }, {\n    key: 'DSR',\n    value: function DSR(options) {\n      options = options || {};\n\n      var targets = options.targets || [2, 4, 7, 8];\n      var distractors = options.distractors || [3, 5, 6, 9];\n      var prompts = options.prompts || [0, 1];\n      var length = options.length || 24;\n      var criterion = options.success || 0.95;\n      var iterations = options.iterations || 100000;\n      var rate = options.rate || .1;\n      var log = options.log || 0;\n      var schedule = options.schedule || {};\n      var cost = options.cost || this.cost || Trainer.cost.CROSS_ENTROPY;\n\n      var trial, correct, i, j, success;\n      trial = correct = i = j = success = 0;\n      var error = 1,\n          symbols = targets.length + distractors.length + prompts.length;\n\n      var noRepeat = function noRepeat(range, avoid) {\n        var number = Math.random() * range | 0;\n        var used = false;\n        for (var i in avoid) {\n          if (number == avoid[i]) used = true;\n        }return used ? noRepeat(range, avoid) : number;\n      };\n\n      var equal = function equal(prediction, output) {\n        for (var i in prediction) {\n          if (Math.round(prediction[i]) != output[i]) return false;\n        }return true;\n      };\n\n      var start = Date.now();\n\n      while (trial < iterations && (success < criterion || trial % 1000 != 0)) {\n        // generate sequence\n        var sequence = [],\n            sequenceLength = length - prompts.length;\n        for (i = 0; i < sequenceLength; i++) {\n          var any = Math.random() * distractors.length | 0;\n          sequence.push(distractors[any]);\n        }\n        var indexes = [],\n            positions = [];\n        for (i = 0; i < prompts.length; i++) {\n          indexes.push(Math.random() * targets.length | 0);\n          positions.push(noRepeat(sequenceLength, positions));\n        }\n        positions = positions.sort();\n        for (i = 0; i < prompts.length; i++) {\n          sequence[positions[i]] = targets[indexes[i]];\n          sequence.push(prompts[i]);\n        }\n\n        //train sequence\n        var distractorsCorrect;\n        var targetsCorrect = distractorsCorrect = 0;\n        error = 0;\n        for (i = 0; i < length; i++) {\n          // generate input from sequence\n          var input = [];\n          for (j = 0; j < symbols; j++) {\n            input[j] = 0;\n          }input[sequence[i]] = 1;\n\n          // generate target output\n          var output = [];\n          for (j = 0; j < targets.length; j++) {\n            output[j] = 0;\n          }if (i >= sequenceLength) {\n            var index = i - sequenceLength;\n            output[indexes[index]] = 1;\n          }\n\n          // check result\n          var prediction = this.network.activate(input);\n\n          if (equal(prediction, output)) {\n            if (i < sequenceLength) distractorsCorrect++;else targetsCorrect++;\n          } else {\n            this.network.propagate(rate, output);\n          }\n\n          error += cost(output, prediction);\n\n          if (distractorsCorrect + targetsCorrect == length) correct++;\n        }\n\n        // calculate error\n        if (trial % 1000 == 0) correct = 0;\n        trial++;\n        var divideError = trial % 1000;\n        divideError = divideError == 0 ? 1000 : divideError;\n        success = correct / divideError;\n        error /= length;\n\n        // log\n        if (log && trial % log == 0) console.log('iterations:', trial, ' success:', success, ' correct:', correct, ' time:', Date.now() - start, ' error:', error);\n        if (schedule.do && schedule.every && trial % schedule.every == 0) schedule.do({\n          iterations: trial,\n          success: success,\n          error: error,\n          time: Date.now() - start,\n          correct: correct\n        });\n      }\n\n      return {\n        iterations: trial,\n        success: success,\n        error: error,\n        time: Date.now() - start\n      };\n    }\n\n    // train the network to learn an Embeded Reber Grammar\n\n  }, {\n    key: 'ERG',\n    value: function ERG(options) {\n\n      options = options || {};\n      var iterations = options.iterations || 150000;\n      var criterion = options.error || .05;\n      var rate = options.rate || .1;\n      var log = options.log || 500;\n      var cost = options.cost || this.cost || Trainer.cost.CROSS_ENTROPY;\n\n      // gramar node\n      var Node = function Node() {\n        this.paths = [];\n      };\n      Node.prototype = {\n        connect: function connect(node, value) {\n          this.paths.push({\n            node: node,\n            value: value\n          });\n          return this;\n        },\n        any: function any() {\n          if (this.paths.length == 0) return false;\n          var index = Math.random() * this.paths.length | 0;\n          return this.paths[index];\n        },\n        test: function test(value) {\n          for (var i in this.paths) {\n            if (this.paths[i].value == value) return this.paths[i];\n          }return false;\n        }\n      };\n\n      var reberGrammar = function reberGrammar() {\n\n        // build a reber grammar\n        var output = new Node();\n        var n1 = new Node().connect(output, 'E');\n        var n2 = new Node().connect(n1, 'S');\n        var n3 = new Node().connect(n1, 'V').connect(n2, 'P');\n        var n4 = new Node().connect(n2, 'X');\n        n4.connect(n4, 'S');\n        var n5 = new Node().connect(n3, 'V');\n        n5.connect(n5, 'T');\n        n2.connect(n5, 'X');\n        var n6 = new Node().connect(n4, 'T').connect(n5, 'P');\n        var input = new Node().connect(n6, 'B');\n\n        return {\n          input: input,\n          output: output\n        };\n      };\n\n      // build an embeded reber grammar\n      var embededReberGrammar = function embededReberGrammar() {\n        var reber1 = reberGrammar();\n        var reber2 = reberGrammar();\n\n        var output = new Node();\n        var n1 = new Node().connect(output, 'E');\n        reber1.output.connect(n1, 'T');\n        reber2.output.connect(n1, 'P');\n        var n2 = new Node().connect(reber1.input, 'P').connect(reber2.input, 'T');\n        var input = new Node().connect(n2, 'B');\n\n        return {\n          input: input,\n          output: output\n        };\n      };\n\n      // generate an ERG sequence\n      var generate = function generate() {\n        var node = embededReberGrammar().input;\n        var next = node.any();\n        var str = '';\n        while (next) {\n          str += next.value;\n          next = next.node.any();\n        }\n        return str;\n      };\n\n      // test if a string matches an embeded reber grammar\n      var test = function test(str) {\n        var node = embededReberGrammar().input;\n        var i = 0;\n        var ch = str.charAt(i);\n        while (i < str.length) {\n          var next = node.test(ch);\n          if (!next) return false;\n          node = next.node;\n          ch = str.charAt(++i);\n        }\n        return true;\n      };\n\n      // helper to check if the output and the target vectors match\n      var different = function different(array1, array2) {\n        var max1 = 0;\n        var i1 = -1;\n        var max2 = 0;\n        var i2 = -1;\n        for (var i in array1) {\n          if (array1[i] > max1) {\n            max1 = array1[i];\n            i1 = i;\n          }\n          if (array2[i] > max2) {\n            max2 = array2[i];\n            i2 = i;\n          }\n        }\n\n        return i1 != i2;\n      };\n\n      var iteration = 0;\n      var error = 1;\n      var table = {\n        'B': 0,\n        'P': 1,\n        'T': 2,\n        'X': 3,\n        'S': 4,\n        'E': 5\n      };\n\n      var start = Date.now();\n      while (iteration < iterations && error > criterion) {\n        var i = 0;\n        error = 0;\n\n        // ERG sequence to learn\n        var sequence = generate();\n\n        // input\n        var read = sequence.charAt(i);\n        // target\n        var predict = sequence.charAt(i + 1);\n\n        // train\n        while (i < sequence.length - 1) {\n          var input = [];\n          var target = [];\n          for (var j = 0; j < 6; j++) {\n            input[j] = 0;\n            target[j] = 0;\n          }\n          input[table[read]] = 1;\n          target[table[predict]] = 1;\n\n          var output = this.network.activate(input);\n\n          if (different(output, target)) this.network.propagate(rate, target);\n\n          read = sequence.charAt(++i);\n          predict = sequence.charAt(i + 1);\n\n          error += cost(target, output);\n        }\n        error /= sequence.length;\n        iteration++;\n        if (iteration % log == 0) {\n          console.log('iterations:', iteration, ' time:', Date.now() - start, ' error:', error);\n        }\n      }\n\n      return {\n        iterations: iteration,\n        error: error,\n        time: Date.now() - start,\n        test: test,\n        generate: generate\n      };\n    }\n  }, {\n    key: 'timingTask',\n    value: function timingTask(options) {\n\n      if (this.network.inputs() != 2 || this.network.outputs() != 1) throw new Error('Invalid Network: must have 2 inputs and one output');\n\n      if (typeof options == 'undefined') options = {};\n\n      // helper\n      function getSamples(trainingSize, testSize) {\n\n        // sample size\n        var size = trainingSize + testSize;\n\n        // generate samples\n        var t = 0;\n        var set = [];\n        for (var i = 0; i < size; i++) {\n          set.push({ input: [0, 0], output: [0] });\n        }\n        while (t < size - 20) {\n          var n = Math.round(Math.random() * 20);\n          set[t].input[0] = 1;\n          for (var j = t; j <= t + n; j++) {\n            set[j].input[1] = n / 20;\n            set[j].output[0] = 0.5;\n          }\n          t += n;\n          n = Math.round(Math.random() * 20);\n          for (var k = t + 1; k <= t + n && k < size; k++) {\n            set[k].input[1] = set[t].input[1];\n          }t += n;\n        }\n\n        // separate samples between train and test sets\n        var trainingSet = [];\n        var testSet = [];\n        for (var l = 0; l < size; l++) {\n          (l < trainingSize ? trainingSet : testSet).push(set[l]);\n        } // return samples\n        return {\n          train: trainingSet,\n          test: testSet\n        };\n      }\n\n      var iterations = options.iterations || 200;\n      var error = options.error || .005;\n      var rate = options.rate || [.03, .02];\n      var log = options.log === false ? false : options.log || 10;\n      var cost = options.cost || this.cost || Trainer.cost.MSE;\n      var trainingSamples = options.trainSamples || 7000;\n      var testSamples = options.trainSamples || 1000;\n\n      // samples for training and testing\n      var samples = getSamples(trainingSamples, testSamples);\n\n      // train\n      var result = this.train(samples.train, {\n        rate: rate,\n        log: log,\n        iterations: iterations,\n        error: error,\n        cost: cost\n      });\n\n      return {\n        train: result,\n        test: this.test(samples.test)\n      };\n    }\n  }]);\n\n  return Trainer;\n}();\n\nTrainer.cost = cost;\nexports.default = Trainer;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Architect = exports.Network = exports.Trainer = exports.Layer = exports.Neuron = undefined;\n\nvar _Neuron = __webpack_require__(2);\n\nObject.defineProperty(exports, 'Neuron', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Neuron).default;\n  }\n});\n\nvar _Layer = __webpack_require__(0);\n\nObject.defineProperty(exports, 'Layer', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Layer).default;\n  }\n});\n\nvar _Trainer = __webpack_require__(3);\n\nObject.defineProperty(exports, 'Trainer', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Trainer).default;\n  }\n});\n\nvar _Network = __webpack_require__(1);\n\nObject.defineProperty(exports, 'Network', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Network).default;\n  }\n});\n\nvar _architect = __webpack_require__(7);\n\nvar Architect = _interopRequireWildcard(_architect);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Architect = Architect;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar connections = exports.connections = 0;\n\nvar Connection = function () {\n  function Connection(from, to, weight) {\n    _classCallCheck(this, Connection);\n\n    if (!from || !to) throw new Error(\"Connection Error: Invalid neurons\");\n\n    this.ID = Connection.uid();\n    this.from = from;\n    this.to = to;\n    this.weight = typeof weight == 'undefined' ? Math.random() * .2 - .1 : weight;\n    this.gain = 1;\n    this.gater = null;\n  }\n\n  _createClass(Connection, null, [{\n    key: \"uid\",\n    value: function uid() {\n      return exports.connections = connections += 1, connections - 1;\n    }\n  }]);\n\n  return Connection;\n}();\n\nexports.default = Connection;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.connections = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// represents a connection from one layer to another, and keeps track of its weight and gain\nvar connections = exports.connections = 0;\n\nvar LayerConnection = function () {\n  function LayerConnection(fromLayer, toLayer, type, weights) {\n    _classCallCheck(this, LayerConnection);\n\n    this.ID = LayerConnection.uid();\n    this.from = fromLayer;\n    this.to = toLayer;\n    this.selfconnection = toLayer == fromLayer;\n    this.type = type;\n    this.connections = {};\n    this.list = [];\n    this.size = 0;\n    this.gatedfrom = [];\n\n    if (typeof this.type == 'undefined') {\n      if (fromLayer == toLayer) this.type = _Layer2.default.connectionType.ONE_TO_ONE;else this.type = _Layer2.default.connectionType.ALL_TO_ALL;\n    }\n\n    if (this.type == _Layer2.default.connectionType.ALL_TO_ALL || this.type == _Layer2.default.connectionType.ALL_TO_ELSE) {\n      for (var here in this.from.list) {\n        for (var there in this.to.list) {\n          var from = this.from.list[here];\n          var to = this.to.list[there];\n          if (this.type == _Layer2.default.connectionType.ALL_TO_ELSE && from == to) continue;\n          var connection = from.project(to, weights);\n\n          this.connections[connection.ID] = connection;\n          this.size = this.list.push(connection);\n        }\n      }\n    } else if (this.type == _Layer2.default.connectionType.ONE_TO_ONE) {\n\n      for (var neuron in this.from.list) {\n        var from = this.from.list[neuron];\n        var to = this.to.list[neuron];\n        var connection = from.project(to, weights);\n\n        this.connections[connection.ID] = connection;\n        this.size = this.list.push(connection);\n      }\n    }\n\n    fromLayer.connectedTo.push(this);\n  }\n\n  _createClass(LayerConnection, null, [{\n    key: 'uid',\n    value: function uid() {\n      return exports.connections = connections += 1, connections - 1;\n    }\n  }]);\n\n  return LayerConnection;\n}();\n\nexports.default = LayerConnection;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Perceptron = __webpack_require__(8);\n\nObject.defineProperty(exports, 'Perceptron', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Perceptron).default;\n  }\n});\n\nvar _LSTM = __webpack_require__(9);\n\nObject.defineProperty(exports, 'LSTM', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_LSTM).default;\n  }\n});\n\nvar _Liquid = __webpack_require__(10);\n\nObject.defineProperty(exports, 'Liquid', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Liquid).default;\n  }\n});\n\nvar _Hopfield = __webpack_require__(11);\n\nObject.defineProperty(exports, 'Hopfield', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Hopfield).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Network2 = __webpack_require__(1);\n\nvar _Network3 = _interopRequireDefault(_Network2);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Perceptron = function (_Network) {\n  _inherits(Perceptron, _Network);\n\n  function Perceptron() {\n    _classCallCheck(this, Perceptron);\n\n    var _this = _possibleConstructorReturn(this, (Perceptron.__proto__ || Object.getPrototypeOf(Perceptron)).call(this));\n\n    var args = Array.prototype.slice.call(arguments); // convert arguments to Array\n    if (args.length < 3) throw new Error('not enough layers (minimum 3) !!');\n\n    var inputs = args.shift(); // first argument\n    var outputs = args.pop(); // last argument\n    var layers = args; // all the arguments in the middle\n\n    var input = new _Layer2.default(inputs);\n    var hidden = [];\n    var output = new _Layer2.default(outputs);\n\n    var previous = input;\n\n    // generate hidden layers\n    for (var i = 0; i < layers.length; i++) {\n      var size = layers[i];\n      var layer = new _Layer2.default(size);\n      hidden.push(layer);\n      previous.project(layer);\n      previous = layer;\n    }\n    previous.project(output);\n\n    // set layers of the neural network\n    _this.set({\n      input: input,\n      hidden: hidden,\n      output: output\n    });\n    return _this;\n  }\n\n  return Perceptron;\n}(_Network3.default);\n\nexports.default = Perceptron;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Network2 = __webpack_require__(1);\n\nvar _Network3 = _interopRequireDefault(_Network2);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar LSTM = function (_Network) {\n  _inherits(LSTM, _Network);\n\n  function LSTM() {\n    _classCallCheck(this, LSTM);\n\n    var _this = _possibleConstructorReturn(this, (LSTM.__proto__ || Object.getPrototypeOf(LSTM)).call(this));\n\n    var args = Array.prototype.slice.call(arguments); // convert arguments to array\n    if (args.length < 3) throw new Error(\"not enough layers (minimum 3) !!\");\n\n    var last = args.pop();\n    var option = {\n      peepholes: _Layer2.default.connectionType.ALL_TO_ALL,\n      hiddenToHidden: false,\n      outputToHidden: false,\n      outputToGates: false,\n      inputToOutput: true\n    };\n    if (typeof last != 'number') {\n      var outputs = args.pop();\n      if (last.hasOwnProperty('peepholes')) option.peepholes = last.peepholes;\n      if (last.hasOwnProperty('hiddenToHidden')) option.hiddenToHidden = last.hiddenToHidden;\n      if (last.hasOwnProperty('outputToHidden')) option.outputToHidden = last.outputToHidden;\n      if (last.hasOwnProperty('outputToGates')) option.outputToGates = last.outputToGates;\n      if (last.hasOwnProperty('inputToOutput')) option.inputToOutput = last.inputToOutput;\n    } else {\n      var outputs = last;\n    }\n\n    var inputs = args.shift();\n    var layers = args;\n\n    var inputLayer = new _Layer2.default(inputs);\n    var hiddenLayers = [];\n    var outputLayer = new _Layer2.default(outputs);\n\n    var previous = null;\n\n    // generate layers\n    for (var i = 0; i < layers.length; i++) {\n      // generate memory blocks (memory cell and respective gates)\n      var size = layers[i];\n\n      var inputGate = new _Layer2.default(size).set({\n        bias: 1\n      });\n      var forgetGate = new _Layer2.default(size).set({\n        bias: 1\n      });\n      var memoryCell = new _Layer2.default(size);\n      var outputGate = new _Layer2.default(size).set({\n        bias: 1\n      });\n\n      hiddenLayers.push(inputGate);\n      hiddenLayers.push(forgetGate);\n      hiddenLayers.push(memoryCell);\n      hiddenLayers.push(outputGate);\n\n      // connections from input layer\n      var input = inputLayer.project(memoryCell);\n      inputLayer.project(inputGate);\n      inputLayer.project(forgetGate);\n      inputLayer.project(outputGate);\n\n      // connections from previous memory-block layer to this one\n      if (previous != null) {\n        var cell = previous.project(memoryCell);\n        previous.project(inputGate);\n        previous.project(forgetGate);\n        previous.project(outputGate);\n      }\n\n      // connections from memory cell\n      var output = memoryCell.project(outputLayer);\n\n      // self-connection\n      var self = memoryCell.project(memoryCell);\n\n      // hidden to hidden recurrent connection\n      if (option.hiddenToHidden) memoryCell.project(memoryCell, _Layer2.default.connectionType.ALL_TO_ELSE);\n\n      // out to hidden recurrent connection\n      if (option.outputToHidden) outputLayer.project(memoryCell);\n\n      // out to gates recurrent connection\n      if (option.outputToGates) {\n        outputLayer.project(inputGate);\n        outputLayer.project(outputGate);\n        outputLayer.project(forgetGate);\n      }\n\n      // peepholes\n      memoryCell.project(inputGate, option.peepholes);\n      memoryCell.project(forgetGate, option.peepholes);\n      memoryCell.project(outputGate, option.peepholes);\n\n      // gates\n      inputGate.gate(input, _Layer2.default.gateType.INPUT);\n      forgetGate.gate(self, _Layer2.default.gateType.ONE_TO_ONE);\n      outputGate.gate(output, _Layer2.default.gateType.OUTPUT);\n      if (previous != null) inputGate.gate(cell, _Layer2.default.gateType.INPUT);\n\n      previous = memoryCell;\n    }\n\n    // input to output direct connection\n    if (option.inputToOutput) inputLayer.project(outputLayer);\n\n    // set the layers of the neural network\n    _this.set({\n      input: inputLayer,\n      hidden: hiddenLayers,\n      output: outputLayer\n    });\n    return _this;\n  }\n\n  return LSTM;\n}(_Network3.default);\n\nexports.default = LSTM;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Network2 = __webpack_require__(1);\n\nvar _Network3 = _interopRequireDefault(_Network2);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Liquid = function (_Network) {\n  _inherits(Liquid, _Network);\n\n  function Liquid(inputs, hidden, outputs, connections, gates) {\n    _classCallCheck(this, Liquid);\n\n    // create layers\n    var _this = _possibleConstructorReturn(this, (Liquid.__proto__ || Object.getPrototypeOf(Liquid)).call(this));\n\n    var inputLayer = new _Layer2.default(inputs);\n    var hiddenLayer = new _Layer2.default(hidden);\n    var outputLayer = new _Layer2.default(outputs);\n\n    // make connections and gates randomly among the neurons\n    var neurons = hiddenLayer.neurons();\n    var connectionList = [];\n\n    for (var i = 0; i < connections; i++) {\n      // connect two random neurons\n      var from = Math.random() * neurons.length | 0;\n      var to = Math.random() * neurons.length | 0;\n      var connection = neurons[from].project(neurons[to]);\n      connectionList.push(connection);\n    }\n\n    for (var j = 0; j < gates; j++) {\n      // pick a random gater neuron\n      var gater = Math.random() * neurons.length | 0;\n      // pick a random connection to gate\n      var connection = Math.random() * connectionList.length | 0;\n      // let the gater gate the connection\n      neurons[gater].gate(connectionList[connection]);\n    }\n\n    // connect the layers\n    inputLayer.project(hiddenLayer);\n    hiddenLayer.project(outputLayer);\n\n    // set the layers of the network\n    _this.set({\n      input: inputLayer,\n      hidden: [hiddenLayer],\n      output: outputLayer\n    });\n    return _this;\n  }\n\n  return Liquid;\n}(_Network3.default);\n\nexports.default = Liquid;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Network2 = __webpack_require__(1);\n\nvar _Network3 = _interopRequireDefault(_Network2);\n\nvar _Trainer = __webpack_require__(3);\n\nvar _Trainer2 = _interopRequireDefault(_Trainer);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Hopfield = function (_Network) {\n  _inherits(Hopfield, _Network);\n\n  function Hopfield(size) {\n    _classCallCheck(this, Hopfield);\n\n    var _this = _possibleConstructorReturn(this, (Hopfield.__proto__ || Object.getPrototypeOf(Hopfield)).call(this));\n\n    var inputLayer = new _Layer2.default(size);\n    var outputLayer = new _Layer2.default(size);\n\n    inputLayer.project(outputLayer, _Layer2.default.connectionType.ALL_TO_ALL);\n\n    _this.set({\n      input: inputLayer,\n      hidden: [],\n      output: outputLayer\n    });\n\n    _this.trainer = new _Trainer2.default(_this);\n    return _this;\n  }\n\n  _createClass(Hopfield, [{\n    key: 'learn',\n    value: function learn(patterns) {\n      var set = [];\n      for (var p in patterns) {\n        set.push({\n          input: patterns[p],\n          output: patterns[p]\n        });\n      }return this.trainer.train(set, {\n        iterations: 500000,\n        error: .00005,\n        rate: 1\n      });\n    }\n  }, {\n    key: 'feed',\n    value: function feed(pattern) {\n      var output = this.activate(pattern);\n\n      var pattern = [];\n      for (var i in output) {\n        pattern[i] = output[i] > .5 ? 1 : 0;\n      }return pattern;\n    }\n  }]);\n\n  return Hopfield;\n}(_Network3.default);\n\nexports.default = Hopfield;\n\n/***/ })\n/******/ ]);\n});",null,null,null,null,null,null,null,null],"names":["GrammaticalCase","Gender","validateAnthroponym","anthroponym","TypeError","Male","Female","includes","gender","firstName","middleName","lastName","InflectorCommandType","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","countGroups","src","matches","RegExp","toString","exec","length","isUpperCase","pos","charAt","toUpperCase","isLowerCase","toLowerCase","command","AppendCommandRunner","value","ReplaceCommandRunner","CommandRunnerFactory","type","Append","Replace","rule","commandRunnerFactory","RuleInflector","word","grammaticalCase","commands","searchValue","pattern","modify","inflectedWord","replace","match","_i","groups","replacer","groupCount","RegExpUtils.countGroups","_this","groupIndex","make","dest","result","srcLetterCases","srcChars","split","srcChar","push","destChars","destChar","srcLetterCase","StringUtils.copyLetterCase","NameInflector","name","words","map","wordIndex","inflectWord","join","rules","_super","FirstNameInflector","inflect","MiddleNameInflector","PATTERN_VOWELS","partOfSpeechRecognizer","LastNameInflector","isLastWord","LangUtils.countVowels","firstNameInflector","middleNameInflector","lastNameInflector","AnthroponymInflector","WordTransformer","PartOfSpeechRecognizer","transformedWord","transform","find","condition","apply","PartOfSpeech","factory","modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","getter","o","defineProperty","configurable","enumerable","get","n","__esModule","object","property","s","_createClass","defineProperties","target","props","descriptor","writable","key","Constructor","protoProps","staticProps","_LayerConnection2","_interopRequireDefault","_Neuron2","_Network2","obj","default","Layer","size","instance","_classCallCheck","list","connectedTo","neuron","input","activations","Error","id","activation","activate","rate","propagate","layer","weights","layers","connected","connection","gateType","INPUT","to","gater","connections","inputs","gated","ID","gate","OUTPUT","from","projected","ONE_TO_ONE","gatedfrom","selfconnected","here","there","connectionType","ALL_TO_ALL","clear","reset","options","label","squash","bias","ALL_TO_ELSE","_typeof","Symbol","iterator","_Layer2","_Trainer2","Network","hidden","output","optimized","optimize","unit","project","restore","inputLayer","outputLayer","that","neurons","propagation_sentences","reverse","hardcode","memory","variables","activation_sentences","j","trace_sentences","outputs","targets","network","Function","data","trace","check_activation","check_propagation","getValue","args","slice","arguments","shift","prop","pop","state","old","elegibility","extended","weight","gain","hiddenLayer","bool","ignoreTraces","ids","copy","LOGISTIC","TANH","IDENTITY","HLIM","RELU","selfconnection","edgeConnection","code","concat","layerTo","layerID","indexOf","layerToID","fakeNode","layerfrom","link","escape","dimension","tmp","substring","index","set","workerOptions","iterations","error","cost","crossValidate","costFunction","MSE","workerFunction","getWorkerSharedFunctions","JSON","stringify","blob","Blob","blobURL","window","URL","createObjectURL","Worker","fromJSON","toJSON","_SHARED_WORKER_FUNCTIONS","train_f","train","_trainSet_f","_trainSet","test_f","test","json","config","add","_Connection","_Connection2","x","derivate","fx","Math","exp","pow","tanh","Neuron","uid","responsibility","influences","neighboors","random","derivative","influence","incoming","xtrace","gradient","store_activation","store_trace","store_propagation","varID","__count","__neuron","allocate","store","currentLayer","getVar","buildSentence","sentence","isEmpty","noProjections","noGates","isInput","isOutput","self_gain","self_weight","input_activation","input_weight","input_gain","eP","eN","neuron_old","initialized","incoming_weight","incoming_activation","neuron_self_weight","neuron_self_gain","connection_weight","neuron_responsibility","shuffleInplace","floor","CROSS_ENTROPY","crossentropy","log","mse","BINARY","misses","round","Trainer","currentRate","testSet","trainSet","bucketSize","abort","start","Date","now","schedule","customLog","console","testSize","testError","isArray","numTrain","ceil","lastError","currentSetSize","currentBucket","every","do","shuffle","time","workerTrain","bind","Promise","resolve","reject","e","errorSum","callback","suppressWarning","warn","worker","onmessage","action","message","ownership","memoryBuffer","terminate","scheduled","postMessage","defaults","trial","correct","success","distractors","prompts","criterion","symbols","noRepeat","range","avoid","number","used","equal","prediction","sequence","sequenceLength","any","distractorsCorrect","indexes","positions","sort","targetsCorrect","divideError","Node","paths","connect","node","reberGrammar","n1","n2","n3","n4","n5","n6","embededReberGrammar","reber1","reber2","generate","next","str","different","array1","array2","max1","i1","max2","i2","iteration","table","B","P","T","X","S","E","read","predict","ch","samples","trainingSize","t","k","trainingSet","getSamples","trainSamples","Architect","undefined","_Neuron","_Layer","_Trainer","_Network","newObj","_interopRequireWildcard","Connection","LayerConnection","fromLayer","toLayer","_Perceptron","_LSTM","_Liquid","_Hopfield","_Network3","_possibleConstructorReturn","self","ReferenceError","Perceptron","getPrototypeOf","previous","subClass","superClass","_inherits","LSTM","last","option","peepholes","hiddenToHidden","outputToHidden","outputToGates","inputToOutput","hiddenLayers","inputGate","forgetGate","memoryCell","outputGate","cell","Liquid","gates","connectionList","Hopfield","trainer","patterns","NeuralNetworkParameters","WordEncoder","char","charCodeAt","padStart","digit","Number","parseInt","PartOfSpeechEncoder","Noun","Adjective","PartOfSpeechDecoder","synaptic","NeuralNetwork","structure","trainingData","trainingOptions","entries","_a","partOfSpeech","encode","decode","neuralNetwork","cache","RecognizerRule","pohorielovaStructure","kosmiiStructure","pelykhStructure","anthroponymInflector","inflectorRules","Validator.validateAnthroponym","Ablative","Accusative","Dative","Genitive","Locative","Nominative","Vocative"],"mappings":"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"}